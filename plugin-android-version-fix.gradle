def PLUGIN_NAME = "cordova-plugin-android-version-fix"

ext {PLAY_SERVICES_VERSION = "+"}

// List of libs to search for.
def LIBS = [
    'com.google.android.gms',
]

println("+-----------------------------------------------------------------");
println("| " + PLUGIN_NAME + ": " + PLAY_SERVICES_VERSION);
println("+-----------------------------------------------------------------");

configurations.all {
    resolutionStrategy.eachDependency { DependencyResolveDetails details ->
        if (details.requested.group in LIBS) { details.useVersion PLAY_SERVICES_VERSION }
        if (details.requested.name == 'com.google.firebase:firebase-core') { details.useVersion '16.0.8' }
        if (details.requested.name == 'com.google.firebase:firebase-messaging') { details.useVersion '17.5.0' }
        if (details.requested.name == 'com.google.firebase:firebase-config') { details.useVersion '16.4.1' }
        if (details.requested.name == 'com.google.firebase:firebase-perf') { details.useVersion '16.2.4' }
        if (details.requested.name == 'com.google.firebase:firebase-dynamic-links') { details.useVersion '16.0.1' }
    }
}

println("+-----------------------------------------------------------------");
println("| Enableing MultiDex For Android ");
println("+-----------------------------------------------------------------");

android {
    defaultConfig {
        multiDexEnabled = true
    }
    dexOptions {
        jumboMode true
    }
}